<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GPU Cloud - Quick Reference Cheat Sheet</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root {
      --primary: #667eea;
      --secondary: #764ba2;
      --success: #52c41a;
      --warning: #fa8c16;
      --danger: #f5222d;
      --info: #1890ff;
    }
    
    body {
      font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 2rem 0;
      font-size: 0.9rem;
    }
    
    .container {
      max-width: 1400px;
    }
    
    .header {
      background: white;
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 2rem;
      text-align: center;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
    
    .header h1 {
      color: var(--primary);
      font-weight: 800;
      margin-bottom: 0.5rem;
      font-size: 2.5rem;
    }
    
    .header p {
      color: #666;
      margin: 0;
      font-size: 1.1rem;
    }
    
    .section-card {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 2px 12px rgba(0,0,0,0.08);
      break-inside: avoid;
    }
    
    .section-title {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 3px solid var(--primary);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .section-icon {
      font-size: 1.5rem;
    }
    
    .cmd-block {
      background: #2d2d2d;
      color: #f8f8f2;
      padding: 0.75rem 1rem;
      border-radius: 6px;
      font-family: 'SF Mono', 'Monaco', monospace;
      font-size: 0.85rem;
      margin: 0.5rem 0;
      position: relative;
      overflow-x: auto;
      border-left: 4px solid var(--success);
    }
    
    .cmd-block code {
      color: inherit;
      background: none;
    }

    .cmd-block .comment {
      color: #6a9955;  /* Green color for comments */
      font-style: italic;
    }
    
    
    .cmd-label {
      font-size: 0.75rem;
      color: #888;
      margin-bottom: 0.25rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .copy-icon {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      background: rgba(255,255,255,0.1);
      border: none;
      color: #fff;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.75rem;
      opacity: 0.6;
      transition: opacity 0.2s;
    }
    
    .copy-icon:hover {
      opacity: 1;
    }
    
    .tip {
      background: #e6f7ff;
      border-left: 4px solid var(--info);
      padding: 0.75rem 1rem;
      margin: 0.75rem 0;
      border-radius: 4px;
      font-size: 0.85rem;
    }
    
    .warning {
      background: #fff7e6;
      border-left: 4px solid var(--warning);
      padding: 0.75rem 1rem;
      margin: 0.75rem 0;
      border-radius: 4px;
      font-size: 0.85rem;
    }
    
    .quick-list {
      list-style: none;
      padding-left: 0;
      margin-bottom: 0;
    }
    
    .quick-list li {
      padding: 0.4rem 0;
      padding-left: 1.5rem;
      position: relative;
      font-size: 0.9rem;
    }
    
    .quick-list li:before {
      content: "â–¸";
      position: absolute;
      left: 0;
      color: var(--primary);
      font-weight: bold;
    }
    
    .grid-2 {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1rem;
      margin: 1rem 0;
    }
    
    .mini-card {
      background: #f8f9fa;
      border: 2px solid #e9ecef;
      border-radius: 8px;
      padding: 1rem;
    }
    
    .mini-card-title {
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
    }
    
    .badge-custom {
      background: var(--primary);
      color: white;
      padding: 0.25rem 0.75rem;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 600;
      display: inline-block;
      /* margin: 0.25rem 0.25rem 0.25rem 0; */
    }

    artefact {
      background-color: var(--primary);
      color: #fff;
      padding: 0.2em 0.5em;
      border-radius: 0.25rem;
      font-weight: normal; /* override bold if you want */
    }

    
    .table-compact {
      font-size: 0.85rem;
    }
    
    .table-compact th {
      background: #f8f9fa;
      font-weight: 700;
      color: var(--primary);
    }
    
    .workflow-mini {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin: 0.5rem 0;
      font-size: 0.85rem;
    }
    
    .workflow-num {
      background: var(--primary);
      color: white;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 0.75rem;
      flex-shrink: 0;
    }
    
    .columns-2 {
      column-count: 2;
      column-gap: 1.5rem;
    }
    
    @media (max-width: 992px) {
      .columns-2 {
        column-count: 1;
      }
    }
    
    @media print {
      body {
        background: white;
        padding: 0;
      }
      .section-card {
        box-shadow: none;
        border: 1px solid #ddd;
        page-break-inside: avoid;
      }
    }
  </style>
</head>
<body>

<div class="container">
  <!-- Header -->
  <div class="header">
    <h1>ğŸš€ GPU Cloud Cheat Sheet</h1>
    <p>Quick reference for VMs, Volumes, Commands & Workflows</p>
  </div>

  <div class="columns-2">
    
    <!-- Quick Start Workflow -->
    <div class="section-card">
      <div class="section-title">
        <span class="section-icon">âš¡</span>
        Quick Start: Create & Run
      </div>
      
      <div class="workflow-mini">
        <div class="workflow-num">1</div>
        <div><strong>Project â†’ Create VM</strong> (choose GPU flavor + image)</div>
      </div>
      <div class="workflow-mini">
        <div class="workflow-num">2</div>
        <div><strong>Create Volume</strong> (for datasets)</div>
      </div>
      <div class="workflow-mini">
        <div class="workflow-num">3</div>
        <div><strong>Create Staging VM</strong> (cheap CPU, attach volume)</div>
      </div>
      <div class="workflow-mini">
        <div class="workflow-num">4</div>
        <div><strong>Copy device path</strong> from UI (ğŸ“‹ Copy Device button)</div>
      </div>
      <div class="workflow-mini">
        <div class="workflow-num">5</div>
        <div><strong>Mount & upload data</strong> to staging VM via <code>rsync</code></div>
      </div>
      <div class="workflow-mini">
        <div class="workflow-num">6</div>
        <div><strong>Unmount, detach</strong> â†’ attach to GPU VM</div>
      </div>
      <div class="workflow-mini">
        <div class="workflow-num">7</div>
        <div><strong>SSH to GPU VM</strong> â†’ mount volume â†’ run training</div>
      </div>
      <div class="workflow-mini">
        <div class="workflow-num">8</div>
        <div><strong>Download results</strong> â†’ unmount â†’ stop/delete VM</div>
      </div>
    </div>

    <!-- Storage Types -->
    <div class="section-card">
      <div class="section-title">
        <span class="section-icon">ğŸ’¾</span>
        Storage Types
      </div>
      
      <table class="table table-compact table-borderless mb-0">
        <tr>
          <td><strong>Root Disk</strong></td>
          <td>OS + configs (persistent)</td>
        </tr>
        <tr>
          <td><strong>Ephemeral</strong></td>
          <td>Fast scratch (deleted on stop)</td>
        </tr>
        <tr>
          <td><strong>Volume</strong></td>
          <td>Datasets/outputs (attach/detach)</td>
        </tr>
      </table>

      <div class="tip">
        <strong>ğŸ’¡ Pro tip:</strong> Always use volumes for important data. Root/ephemeral disks can be lost!
      </div>
    </div>

    <!-- Getting Device Path - NEW -->
    <div class="section-card">
      <div class="section-title">
        <span class="section-icon">ğŸ“‹</span>
        Getting Device Path from UI
      </div>
      
      <div class="tip">
        <strong>After attaching volume:</strong>
        <ol class="mb-2 mt-2" style="padding-left: 1.2rem;">
          <li>Go to VM details in UI</li>
          <li>Find "Attached Volumes" section</li>
          <li>Click <strong>ğŸ“‹ Copy Device</strong> button</li>
          <li>Use in mount commands below</li>
        </ol>
        <strong>Example device path:</strong><br>
        <code style="background: #2d2d2d; color: #f8f8f2; padding: 0.25rem 0.5rem; border-radius: 3px; display: inline-block; margin-top: 0.5rem;">/dev/disk/by-id/virtio-c72d3b45-dc19-48ec-9</code>
      </div>
    </div>

    <!-- Data Transfer -->
    <div class="section-card">
      <div class="section-title">
        <span class="section-icon">ğŸ“¤</span>
        Data Transfer Commands
      </div>
      
      <div class="cmd-label">Upload to VM (from laptop)</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>rsync -avz -P --checksum -e "ssh -i /path/to/ssh_private_key" ./dataset/ ubuntu@VM_IP:/mnt/user_volume</code>
      </div>

      <div class="cmd-label">Download from VM (to laptop)</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>rsync -avz -P --checksum -e "ssh -i /path/to/ssh_private_key" ubuntu@VM_IP:/mnt/user_volume/results/ ./local_results/</code>
      </div>
      <div class="cmd-label">Cost-Saving Strategy</div>
      <div class="tip">
        <ol class="mb-2 mt-2" style="padding-left: 1.2rem;">
          <li>Create a <artefact>Volume</artefact></li>
          <li>Attach it to a cheap <artefact>Staging VM</artefact> (CPU-only)</li>
          <li>Upload data to <artefact>Volume</artefact> on <artefact>Staging VM</artefact></li>
          <li>Unmount-Detach <artefact>Volume</artefact> from <artefact>Staging VM</artefact> then Attach-Mount it to <artefact>GPU VM</artefact></li>
          <li>Saves GPU hours during uploads!</li>
        </ol>
      </div>
    </div>

    <!-- Volume Management - UPDATED WITH HYPERSTACK -->
    <div class="section-card">
      <div class="section-title">
        <span class="section-icon">ğŸ’½</span>
        Volume Management
      </div>
      
      <div class="cmd-label">List disks & find your volume</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>lsblk <br>
ls -l /dev/disk/by-id/virtio-*</code>
      </div>

      <div class="cmd-label">Format new volume (use device path from UI)</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code># Paste YOUR device path here <br>
DEVICE="/dev/disk/by-id/virtio-xxxxx" <br>
# !!! WARNING: IT WILL ERASE ALL DATA OF THE VOLUME SO ONLY DO THIS WHEN IT IS A NEW, EMPTY VOLUME !!! <br>
sudo mkfs.ext4 -F ${DEVICE}</code>
      </div>

      <div class="cmd-label">Mount volume</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>sudo mkdir -p /mnt/user_volume <br>
sudo mount ${DEVICE} /mnt/user_volume <br>
df -h | grep user_volume</code>
      </div>

      <div class="cmd-label">Unmount safely (before detach in UI)</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>sync
sudo umount /mnt/user_volume</code>
      </div>

      <div class="warning">
        <strong>âš ï¸ Critical:</strong> Always <code>sync</code> and <code>umount</code> before detaching in UI!
      </div>
    </div>

    <!-- Auto-Mount on Boot - NEW -->
    <div class="section-card">
      <div class="section-title">
        <span class="section-icon">ğŸ”„</span>
        Auto-Mount on Boot
      </div>
      
      <div class="cmd-label">Step 1: Get UUID</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>sudo blkid ${DEVICE} <br>
# Copy the UUID value</code>
      </div>

      <div class="cmd-label">Step 2: Edit /etc/fstab</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>sudo nano /etc/fstab <br>
# Add this line (replace UUID): <br>
UUID=your-uuid /mnt/user_volume ext4 defaults,nofail 0 2</code>
      </div>

      <div class="cmd-label">Step 3: Test it</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>sudo umount /mnt/user_volume <br>
sudo mount -a <br>
df -h | grep user_volume</code>
      </div>

      <div class="warning">
        <strong>âš ï¸ Important:</strong> Use <code>nofail</code> option if volume isn't always attached, or VM won't boot!
      </div>
    </div>

    <!-- Environment Setup -->
    <div class="section-card">
      <div class="section-title">
        <span class="section-icon">ğŸ</span>
        Environment Setup
      </div>
      
      <div class="cmd-label">Load RCCG modules</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>module avail <br>
module load anaconda3/2024.02-1 <br>
module load ml_dl_gpu_base_all</code>
      </div>

      <div class="cmd-label">Conda environment</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>conda create -n myenv python=3.11 -y <br>
conda activate myenv <br>
pip install -r requirements.txt</code>
      </div>

      <div class="cmd-label">Singularity with GPU</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>singularity exec --nv myimage.sif python train.py</code>
      </div>
    </div>

    <!-- Running Jobs -->
    <div class="section-card">
      <div class="section-title">
        <span class="section-icon">â–¶ï¸</span>
        Running Jobs
      </div>
      
      <div class="cmd-label">Start tmux session (keeps running after disconnect)</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>tmux new -s training <br>
python train.py | tee train.log <br>
# Detach: Ctrl-B then D</code>
      </div>

      <div class="cmd-label">Reattach to session</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>tmux attach -t training
tmux ls</code>
      </div>

      <div class="tip">
        <strong>ğŸ’¡ Always use tmux/screen</strong> for long-running jobs. SSH disconnections won't kill your work!
      </div>
    </div>

    <!-- Monitoring -->
    <div class="section-card">
      <div class="section-title">
        <span class="section-icon">ğŸ“Š</span>
        Monitoring Commands
      </div>
      
      <div class="grid-2">
        <div class="mini-card">
          <div class="mini-card-title">ğŸ® GPU</div>
          <div class="cmd-block">
            <code>nvidia-smi
watch -n 2 nvidia-smi</code>
          </div>
        </div>
        
        <div class="mini-card">
          <div class="mini-card-title">ğŸ’» CPU/RAM</div>
          <div class="cmd-block">
            <code>htop
free -h</code>
          </div>
        </div>
        
        <div class="mini-card">
          <div class="mini-card-title">ğŸ’½ Disk Space</div>
          <div class="cmd-block">
            <code>df -h /mnt/user_volume
du -sh *</code>
          </div>
        </div>
        
        <div class="mini-card">
          <div class="mini-card-title">ğŸ“ˆ Disk I/O</div>
          <div class="cmd-block">
            <code>iostat -x 2
sudo iotop</code>
          </div>
        </div>
      </div>
    </div>

    <!-- GPU Check -->
    <div class="section-card">
      <div class="section-title">
        <span class="section-icon">âœ…</span>
        GPU Verification
      </div>
      
      <div class="cmd-label">Check NVIDIA driver</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>nvidia-smi
nvcc --version</code>
      </div>

      <div class="cmd-label">Test PyTorch GPU</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>python -c "import torch; print(torch.cuda.is_available())"</code>
      </div>
    </div>

    <!-- Cost Saving Tips -->
    <div class="section-card">
      <div class="section-title">
        <span class="section-icon">ğŸ’°</span>
        Cost-Saving Tips
      </div>
      
      <ul class="quick-list">
        <li>Use <strong>staging VM</strong> for data uploads (not GPU VM)</li>
        <li><strong>Stop VMs</strong> when not in use</li>
        <li>Use <strong>spot instances</strong> for non-critical work</li>
        <li>Share <strong>volumes</strong> across team (no data duplication)</li>
        <li><strong>Right-size</strong> GPU flavor (don't use H100 for small models)</li>
        <li><strong>Compress data</strong> before transfer</li>
        <li><strong>Delete VMs</strong> when experiments finish</li>
        <li>Monitor <strong>credit usage</strong> regularly</li>
      </ul>
    </div>

    <!-- VM States -->
    <div class="section-card">
      <div class="section-title">
        <span class="section-icon">ğŸ”„</span>
        VM Lifecycle
      </div>
      
      <table class="table table-compact mb-0">
        <tr>
          <td><strong>â–¶ï¸Running</strong></td>
          <td>VM has been created or restored and is up and running. VM is billed for compute.</td>
        </tr>
        <tr>
          <td><strong>ğŸ’¤Hibernate</strong></td>
          <td>Save RAM state, faster resume. Still billed for the root disk data and the public IP address</td>
        </tr>
        <tr>
          <td><strong>ğŸ—‘ï¸Deleted</strong></td>
          <td>VM + ephemeral disk is destroyed</td>
        </tr>
      </table>

      <div class="warning">
        <strong>âš ï¸ Before delete:</strong> Copy data to volume, then unmont and detach!
      </div>
    </div>

    <!-- Troubleshooting -->
    <div class="section-card">
      <div class="section-title">
        <span class="section-icon">ğŸ”</span>
        Troubleshooting
      </div>
      
      <div class="cmd-label">Can't unmount? Find what's using it</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>lsof /mnt/user_volume
fuser -m /mnt/user_volume</code>
      </div>

      <div class="cmd-label">GPU driver issues</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>lsmod | grep nvidia
nvidia-smi -q | less</code>
      </div>

      <div class="cmd-label">Check system logs</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>dmesg | tail -n 50
journalctl -xe</code>
      </div>
    </div>

    <!-- Multi-GPU -->
    <div class="section-card">
      <div class="section-title">
        <span class="section-icon">ğŸ®</span>
        Multi-GPU Control
      </div>
      
      <div class="cmd-label">Use specific GPUs</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>export CUDA_VISIBLE_DEVICES=0,1
python train.py  # uses GPU 0 and 1 only</code>
      </div>
    </div>

    <!-- SSH Key Management - NEW -->
    <div class="section-card">
      <div class="section-title">
        <span class="section-icon">ğŸ”‘</span>
        SSH Key Management
      </div>
      
      <div class="cmd-label">View your public key</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>cat ~/.ssh/my_ssh_key.pub</code>
      </div>

      <div class="cmd-label">Restrict access to private key</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>chmod 600 ~/.ssh/my_ssh_key</code>
      </div>

      <div class="cmd-label">Generate new key pair</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>ssh-keygen -t ed25519 -f ~/.ssh/my_ssh_key</code>
      </div>

      <div class="cmd-label">Copy to clipboard (macOS)</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>pbcopy < ~/.ssh/my_ssh_key.pub</code>
      </div>

      <div class="tip">
        <strong>Import SSH keys to VMs:</strong> Use the "Import SSH Key" button in VM details to add your ssh key to the VM you want to get access to.
      </div>

      <div class="cmd-label">SSH with key</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>ssh -i ~/.ssh/id_rsa user@vm-ip</code>
      </div>

      <div class="warning">
        <strong>âš ï¸ Never share private keys!</strong> Only import .pub files to VMs.
      </div>

      <div class="tip">
        <strong>ğŸ’¡ Security:</strong> Always use SSH keys, never passwords.
      </div>
    </div>

    <!-- Pre-Run Checklist -->
    <div class="section-card">
      <div class="section-title">
        <span class="section-icon">âœ”ï¸</span>
        Pre-Run Checklist
      </div>
      
      <ul class="quick-list mb-0">
        <li>âœ… SSH key imported to VM</li>
        <li>âœ… Copy device path from UI</li>
        <li>âœ… Mount volume correctly</li>
        <li>âœ… Setup auto-mount if needed</li>
        <li>âœ… Verify <code>nvidia-smi</code> works</li>
        <li>âœ… Data on volume (not root disk)</li>
        <li>âœ… Start job in <code>tmux</code></li>
        <li>âœ… Enable checkpoints in code</li>
        <li>âœ… Test with small batch first</li>
      </ul>
    </div>

    <!-- Common Pitfalls -->
    <div class="section-card">
      <div class="section-title">
        <span class="section-icon">âš ï¸</span>
        Common Pitfalls
      </div>
      
      <div class="warning">
        <strong>âŒ Don't:</strong>
        <ul class="mb-0 mt-2">
          <li>Upload data directly to GPU VM</li>
          <li>Store important data on ephemeral disk</li>
          <li>Detach volume while mounted</li>
          <li>Leave GPU VMs running idle</li>
          <li>Run without tmux/screen</li>
          <li>Skip checkpointing in code</li>
          <li>Delete VMs without backing up</li>
          <li>Forget <code>nofail</code> in fstab</li>
          <li>Use wrong device path</li>
          <li>Forget to import SSH key to your VMs</li>
          <li>Share or upload private SSH keys (.pem, id_rsa without .pub)</li>
        </ul>
      </div>
    </div>

    <!-- Quick Commands Reference -->
    <div class="section-card">
      <div class="section-title">
        <span class="section-icon">âš¡</span>
        One-Liner Heroes
      </div>
      
      <div class="cmd-label">Check GPU memory usage</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>nvidia-smi --query-gpu=memory.used,memory.total --format=csv</code>
      </div>

      <div class="cmd-label">Find large files on volume</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>du -ah /mnt/user_volume | sort -rh | head -20</code>
      </div>

      <div class="cmd-label">Monitor training log in real-time</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>tail -f train.log</code>
      </div>

      <div class="cmd-label">Verify device path exists</div>
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code>ls -l /dev/disk/by-id/virtio-*</code>
      </div>
    </div>

    <!-- Example Workflow - UPDATED -->
    <div class="section-card">
      <div class="section-title">
        <span class="section-icon">ğŸ¯</span>
        Complete Workflow Example
      </div>
      
      <div class="cmd-block">
        <button class="copy-icon" onclick="copyCode(this)">ğŸ“‹</button>
        <code># 1. Create & attach volume to staging VM in UI<br>
        # 2. Copy device path from UI (ğŸ“‹ button) <br>

        # 3. Imports her SSH public key into the staging VM in UI<br>

        # 4. SSH to staging VM <br>
        ssh -i ~/.ssh/id_rsa user@staging-vm <br>

        # 5. Mount volume with device path <br>
        DEVICE="/dev/disk/by-id/virtio-c72d3b45-dc19-48ec-9" <br>
        sudo mkfs.ext4 -F ${DEVICE} <br>
        sudo mkdir -p /mnt/user_volume <br>
        sudo mount ${DEVICE} /mnt/user_volume <br>

        # 6. Upload data <br>
        # (From laptop in another terminal) <br>
        rsync -avz -P --checksum -e "ssh -i /path/to/ssh_private_key" ./dataset/ ubuntu@staging_VM_IP:/mnt/user_volume <br>

        # 7. Unmount & detach (on staging VM) <br>
        sync <br>
        sudo umount /mnt/user_volume <br>
        # Detach volume in UI <br>

        # 8. Create GPU VM in UI<br>

        # 9. Imports her SSH public key into GPU VM in UI<br>

        # 10. Attach volume to GPU VM in UI <br>

        # 11. SSH to GPU VM & mount <br>
        ssh -i ~/.ssh/id_rsa user@gpu-vm <br>
        # Copy NEW device path from UI for GPU VM <br>
        DEVICE="/dev/disk/by-id/virtio-new-path" <br>
        sudo mount ${DEVICE} /mnt/user_volume <br>

        # 12. Start training in tmux <br>
        tmux new -s train <br>
        module load anaconda3/2024.02-1 ml_dl_gpu_base_all <br>
        python train.py --data /mnt/user_volume | tee train.log <br>
        # Detach: Ctrl-B, D <br>

        # 13. Monitor <br>
        watch -n 2 nvidia-smi <br>

        # 14. After training, unmount & download <br>
        sync <br>
        sudo umount /mnt/user_volume <br>
        # Detach from GPU VM, attach to staging VM, download results <br>
        rsync -avz -P --checksum -e "ssh -i /path/to/ssh_private_key" ubuntu@staging_VM_IP:/mnt/user_volume/results/ ./local_results/

        # 15. Clean up: delete VMs, volume</code>
      </div>
    </div>

    <!-- Contact/Support -->
    <div class="section-card">
      <div class="section-title">
        <span class="section-icon">ğŸ’¬</span>
        Need Help?
      </div>
      
      <div class="tip">
        <strong>ğŸ“– Full Documentation:</strong> See <a href="documentation.html" target="_blank">RCCG GPU Cloud documentation</a>
      </div>
      
      <div class="tip">
        <strong>ğŸ› Issues:</strong> Report bugs or request new features at <strong>rccg@hbku.edu.qa</strong>
      </div>
    </div>

  </div>

  <!-- Footer -->
  <div class="section-card" style="text-align: center; margin-top: 2rem;">
    <p class="mb-0" style="color: #666;">
      <strong>ğŸ’¡ Pro Tip:</strong> Print this page (Ctrl+P) for quick offline reference! <br>
      â€¢ Last updated: November 2025
    </p>
  </div>

</div>

<script>
function copyCode(button) {
  const codeBlock = button.nextElementSibling;
  const text = codeBlock.textContent;
  
  navigator.clipboard.writeText(text).then(() => {
    button.textContent = 'âœ“';
    setTimeout(() => {
      button.textContent = 'ğŸ“‹';
    }, 2000);
  }).catch(err => {
    console.error('Failed to copy:', err);
  });
}

// Highlight comments in code blocks
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.cmd-block code').forEach(block => {
    // Split by lines, process each line, then rejoin
    const lines = block.innerHTML.split('\n');
    const highlighted = lines.map(line => {
      // If line starts with # (after trimming leading spaces), highlight it
      if (line.trim().startsWith('#')) {
        return `<span style="color: #52c41a; font-style: italic;">${line}</span>`;
      }
      return line;
    }).join('\n');
    block.innerHTML = highlighted;
  });
});
</script>

</body>
</html>